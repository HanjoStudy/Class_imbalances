<!DOCTYPE html>
<html>
  <head>
    <title>Construction of Online Media Sentiment indexes</title>
    <meta charset="utf-8">
    <meta name="author" content="Hanjo Odendaal    Department of Economics" />
    <script src="libs/htmlwidgets-0.9/htmlwidgets.js"></script>
    <script src="libs/jquery-1.12.4/jquery.min.js"></script>
    <script src="libs/datatables-binding-0.2/datatables.js"></script>
    <link href="libs/dt-core-1.10.12/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core-1.10.12/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core-1.10.12/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="theme.css" type="text/css" />
    <link rel="stylesheet" href="theme_fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Construction of Online Media Sentiment indexes
## .font150[Feasibility for South African]
### Hanjo Odendaal<br /> <br /> Department of Economics

---






&lt;!-- layout: true --&gt;

&lt;!-- &lt;div class="my-header"&gt;&lt;/div&gt; --&gt;

&lt;!-- &lt;div class="my-footer"&gt;&lt;span&gt;Hanjo Odendaal     --&gt;
&lt;!-- &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp; --&gt;
&lt;!-- &amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp;&amp;emsp; --&gt;
&lt;!-- Department of economics&lt;/span&gt;&lt;/div&gt;  --&gt;

---
class: center, middle, transition

# What is the news really trying to say?

&gt; More information is always better than less. When people know the reason things are happening, even if it's bad news, they can adjust their expectations and react accordingly.

???
Data is being generated at higher volumes as well as in a host of different formats. Information is no longer the result of physical sampling or surveying, but rather a by-product of economic activity 

In the same way, the field of economics is starting to embrace the data revolution by rethinking how this kind of data could be employed within standard economic analysis

Opening up the possibility of using data to inform policy to a greater extent

---
class: body-slide

# Research question 

The paper attempts to gauge the feasibility of constructing online sentiment indices using large amounts of text data as an alternative for the conventional survey method

The key contributions of this paper to the academic literature:

* Can news wholly act as an indicator on consumer confidence;
  
  * Analysis of economic fluctuations through a bottom up modeling approach

  * We construct a monthly series to try and explore this hypothesis

--

* We illustrate and suggest a quantitative framework which researchers and practitioners could employ to help build their own indices;

  * This is especially important when the data is of a very high-dimensional nature &lt;sup&gt;1&lt;/sup&gt;

.footnote[
[1] As is the case with text documents
]

--

* This scale of research is the first of its kind within an emerging market context;

---

class: inverse, middle, center

# Understanding consumer confidence

???
In trying to understand the symbiotic relationship between consumer confidence and the real economy. Two contesting ideas are mostly cited
---

class: body-slide

# Animal spirits

The 'animal spirits' hypothesis was a thought experiment first put forth by Keynes 1937

&gt; Most, probably, of our decisions to do something positive, the full consequences of which will be drawn out over many days to come, can only be taken as the result of *animal spirits*, a spontaneous urge to action rather than inaction, and not as the outcome of a weighted average of quantitative benefits multiplied by quantitative probabilities. - Keynes (1937)

* An unexpected change in the business cycle could occur due to the 'gut', or sentiment outlook, of economic agents reacting out of subjective foresight, rather than *quantitative* evidence

* This in turn changes economic activity through a consumer sentiment shock

* The 'around-the-braai' economic discussions

There is also a *contradicting* philosophy where informational news is the main driving component

???
I have coined this idea as informational contagion. SO the spread of information among economic agents as a result of access to economic understanding as portraid through the media
---

class: body-slide

# Informational contagion

News about the future state of the economy has already been internalised by economic agents, while not yet being captured in hard statistics.

.pull-left[
Beaudry and Portier (2014) and Barsky and Sims (2012) argue that only a limited amount of unexpected business cycle fluctuations can be attributed towards 'animal spirits'; stating that uncaptured fundamental news is the primary channel by which the relationship of sentiment and subsequent economic activity exists
]

.pull-right[
![:scale 50%;](https://media.giphy.com/media/qKltgF7Aw515K/giphy.gif)
]

From the two above explored philosophies, our paper sides with information contagion and hypothesize that that informational news about the economy could be exploited. 
This is especially exciting if you can achieve this a high frequency.

???

* For both the schools of thought, 'informational contagion' or 'animal spirits', the consensus remains the same - consumer confidence and economic activity have a strong correlation

* It is thus useful to incorporate consumer confidence into any model that wishes to forecast the future state of the economy. The reasons for the correlation is still debatable and remain open for discussion.

* Surveys can be expensive to conduct 
* Large coverage of topics and population
* High frequency

---

class: body-slide

# Current literature on the subject

*Where there is smoke there is fire...*

* P. J. Daas and Puts (2014) 
    - Considers the construction of a Dutch *social media* sentiment index (SMI) derived from Facebook, Twitter and various other online data sources. The finding of the paper concluded that a strong association exists between consumer confidence and the sentiment displayed by public Facebook messages.

* Brakel et al. (2017) 
    - Investigates the Dutch SMI by using a multivariate structural time series approach to estimate whether the inclusion of social media in the production of Dutch administrative statistics improve their accuracy
    - Their findings motivates that the SMI can be seen as a substitution for the more traditional survey approach
    
The Dutch National Statistics office was one of the first to start exploring the idea &lt;sup&gt;1&lt;/sup&gt;, but the practical implications when using social media data is disadvantageous.

.pull-right[
![:scale 30%;](./img/cbs.png)]

.footnote[
[1] I have to recognise Piet Daas and Marco Puts works - they are the reason why I am doing my PhD ;-)
]

???
* Why I am not a proponent of using social media data... Data is quite large
* Disadvantage: You assuming that the publishing agents actually know what is going on in the economy (which might be the case in developed countries), but cannot be assumed to be true in developing nations

---

class: body-slide

# Current literature on the subject

Other authors also explored different text datasets such as media

* Fraiberger (2016) 
    - Construct a sentiment index from the full corpus of economic news articles, produced by Reuters, across 12 countries over a 25 year period. The paper found that the constructed index not only tracked GDP at a country level, but contained information on future GDP growth which was not captured by consensus forecasts

* Thorsrud (2016) 
  -  Construct a daily business cycle index based on quarterly GDP and textual information contained in a daily business newspaper.  It is more timely and accurate than commonly used alternative business cycle indicators and indexes. It provides the index user with broad based high frequent information, the type of news index that drive or reflect economic fluctuations

Thus in our paper we combine the idea from the CBS and that of the authors such as Fraiberger, and construct a consumer confidence index purely out of news articles

???
Leif Anders Thorsrud's work employing text data is some of the best you will come across 

---

class: body-slide

# Traditional survey approaches

The consumer confidence questions consists out of the following:

1. *How do you expect the general economic position in South Africa to develop during the next 12 months? Will it improve considerably, improve slightly, deteriorate slightly, deteriorate considerably or don’t know?*
2. *How do you expect the financial position in your household to develop in the next 12 months? Will it improve considerably, improve slightly, deteriorate slightly, deteriorate considerably or don’t know?*
3. *What is your opinion of the suitability of the present time for the purchase of domestic appliances such as furniture, washing machines, refrigerators etc. Do you think that for people in general it is the right time, neither a good nor a bad time or the wrong time?*

Index constructed as a normalised sum of relative scores. 

Percentage of respondents expecting an improvement / good time less the percentage expecting a deterioration / bad time

---

class: body-slide

# Text-based construction of confidence indicators

Sentiment analysis forms part of a larger field called computational linguistics. A body of text can be typically be characterised by examining two facets within the text:

* The degree to which the text exhibits emotion compared to a neutral stance
* The degree to which a certain emotion is deemed to be dominant in the writing

Dimensions is known as the valence and arousal of a body of text. To quantify the sentiment of a body of text, generally one of two (or a combination of) approaches are followed:

* Bag-of-words
* NLP

Before we start the analysis, we have to clean the data:

* Purge all stopwords - *the*, *and*, *a* and so forth
* Remove all editorial pieces with less than 150 words after stopword

---

class: body-slide

# Text-based construction of confidence indicators

A dictionary "bag-of-words" approach to sentiment mining is widely used.

<div id="htmlwidget-12a2271a14eb55a02231" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-12a2271a14eb55a02231">{"x":{"filter":"none","data":[["bing","bing","nrc","nrc","nrc","nrc","nrc","nrc","nrc","nrc","nrc","nrc","loughran","loughran","loughran","loughran","loughran","loughran","loughran_mcdonald","loughran_mcdonald","loughran_mcdonald","henry","henry","harvard_four","harvard_four"],["feverish","tremendously","nurture","disposed","frantic","thrill","carol","intestate","array","spoiler","stealthy","nurse","constraining","legalize","degrading","prospered","impost","predicting","implicates","distinctions","incompleteness","slumped","best","fugitive","harmonize"],["negative","positive","anger","anticipation","disgust","fear","joy","negative","positive","sadness","surprise","trust","constraining","litigious","negative","positive","superfluous","uncertainty","negative","positive","uncertainty","negative","positive","negative","positive"]],"container":"<table class=\"cell-border stripe\">\n  <thead>\n    <tr>\n      <th>dictionary<\/th>\n      <th>word<\/th>\n      <th>sentiment<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100],"rowCallback":"function(row, data) {\nvar value=data[2]; if (value!==null) $(this.api().cell(row, 2).node()).css({'background-color':value == 'negative' ? '#A64C62' : value == 'positive' ? '#4ca690' : ''});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>

---
class: body-slide

# Text-based construction of confidence indicators (Cont.)

Doing a simple word count that consists out of the positive and negative words, we normalise the count so that they reflect the relative fraction of positive and negative words within an article:

`$$Pos_{i, t, n^a} = \frac{PositiveWords}{PositiveWords + NegativeWords} \\
Neg_{i, t, n^a} = \frac{NegativeWords}{PositiveWords + NegativeWords}$$`

The polarity of the article is derived from the score. 

`$$S_{i, t, n^a} = Pos_{i, t, n^a} - Neg_{i, t, n^a}$$`

If the score of the article is greater than zero, then the overall sentiment for the article is deemed to be positive, the same can be said for a negative sentiment score.

---

class: body-slide

# Text-based construction of confidence indicators (Cont.)

The index is constructed as the *net balance of positive and negative articles* within a month. This method of constructing an index should be familiar, as it is the same method the University of Michigan uses to construct their well known consumer confidence index

`$$\mathcal{I}_{t} = \frac{PositiveArticles - NegativeArticles}{PositiveArticles + NegativeArticles}$$`

* All indexes are finally smoothed using a Kalman Filter


---

class: inverse, middle, center

# Data overview

---

class: body-slide

# Data Sources

To construct an economic news sentiment index, we collected data from three different sources:

* Meltwater 
* Sabinet 
* News24

The analysis restricts itself to the period February 2009 to October 2017 as all data-sets have information for this time frame

--

### Meltwater

The data provided by **Meltwater** is extracted from an online platform using "Boolean Search" technology .The searches were sub-dived into 3 categories: 

  * Consumer confidence
  * Business confidence
  * Job-market 
  
The exported file contained information on the original link of the article, the date it was analysed, the source and most importantly the estimated sentiment as derived by Meltwater's propriety classification algorithm

---

class: body-slide

# Meltwater (Cont.)

Different sources and the amount of articles identified through the boolean searches. In total, 207 314 articles were assigned a sentiment score

&lt;img src="presentation_files/figure-html/unnamed-chunk-1-1.png" width="65%" style="display: block; margin: auto;" /&gt;

---

class: body-slide

# News24

For News24, the data was in raw text format. This allowed for a much deeper analysis of the text. 

* The data-set consisted of around 1.9 million articles spanning 15 years from various media channels in the group
* Some articles were not in English. To this purpose, the paper only decided to conduct analysis on the English articles received. The total amount of English articles in the set was 1.2 million. 
* To further lessen the computational burden, the sample was restricted to articles which were labelled as news, archived news or financial news

This left us with a total of ~ 217 000 articles to conduct analysis on. Of these articles, 70 000 were labelled under Financial

---

class: body-slide

# News24 (Cont)

It is clear that for articles with a **financial** tag, the bulk of the corpus exists after 2012

&lt;img src="presentation_files/figure-html/unnamed-chunk-2-1.png" width="55%" style="display: block; margin: auto;" /&gt;

---

class: body-slide

# Sabinet

The last source of text data received was from Sabinet. The data-set consisted out of 262 300 PDF files from Sabinet:
The newspapers represent a large readership throughout South Africa. The aim of using these publishers is to capture general sentiment through diverse readership. The PDFs received all contained digital scans of article snippets from the respective newspapers. These PDF files were then converted to text format using `pdftools`

&lt;img src="img/news_example.png" width="30%" style="display: block; margin: auto;" /&gt;

---

class: inverse, middle, center

# Analysis

---

class: body-slide

# How do the indices compare against CCI?

&lt;img src="presentation_files/figure-html/unnamed-chunk-4-1.png" width="95%" style="display: block; margin: auto;" /&gt;

---

class: body-slide

# Isolating noise from signal

The analysis section of the paper aims to identify the best confidence candidates that mimic's the BER's CCI from the plethora of indexes created. 

--

* To accomplish this, we turn to the field of time series clustering methods. The aim is to sub-divide the large sample set, through clustering, into smaller homogeneous buckets 
  * To identify which of the indexes created resemble the lowest dissimilarity with the BER's consumer confidence index

--

* Time series clustering is an active research area with applications of the techniques being seen in literature encompassing a wide range of fields. Although the technique is gaining traction within other fields, the technique is still under utilised within the field of economics

* The steps in applying the analysis is two-fold
    - Identify an appropriate dissimilarity matrix between the indices created and the CCI
    - Use hierarchical clustering to construct clusters which consists out of all the indices
    
From this we hope to identify a cluster which has indices similar to the traditional CCI

---

class: body-slide

# Choice of dissimilarity measure

Decide to use a non-model based dissimilarity measure, called **Dynamic Time Warping**. Dynamic time warping allows for the recognition of similar shapes between time series, even in the presence of signal transformation such as shifting or scaling. A toy example of how dynamic time warping creates a mapping between time series can be seen here:

&lt;img src="img/dtw_example.png" width="30%" style="display: block; margin: auto;" /&gt;

--

* Advantage is that a pearson correlation based measure would discount any of the constructed series which might lead the CCI!

---

class: body-slide

# Choice of dissimilarity measure

&lt;img src="presentation_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

---

class: body-slide

# Clustering

Hierarchical clustering has two paradigms when approaching the clustering problem, agglomerative and divise. To conduct the clustering we use a commonly know hierarchical clustering method from @R_prog, `hclust` which is an agglomerative algorithm.

* The algorithm starts by assigning each observation to its own cluster
* Next it computes the similarity between each of the clusters and joining those who are most similar

This procedure is repeated until a final cluster is formed in a tree-like fashion. 

* Height of the tree at each node is proportional to the value of the inter-group dissimilarity between its daughter nodes

This structure is more commonly known as a *dendogram*

---
class: body-slide

# Clustering: Linkage criteria

A linkage criterion is needed to act as a function of the pairwise distances of observations in the dissimilarity matrix provided. 

* We used Ward's distance. 
* It can be thought of as an Anova test as clusters merge. Thus optimising within and between cluster variance

Let `\(A=\{a_1,\ldots, a_{n_a}\}\)` and `\(B=\{b_1,\ldots, b_{n_b}\}\)` consist out of observations in `\(\mathbb{R}^d\)`. Define the between-within, or `\(e\)`-distance `\(e(A,B)\)`, between `\(A\)` and `\(B\)` as:

`$$e(A,B)=\frac{n_An_B}{n_A+n_B}\bigg(\frac{2}{n_An_B}\sum_{i=1}^{n_A}\sum_{j=1}^{n_B}d(a_i,b_j)-\frac{1}{n_A^2}\sum_{i=1}^{n_1}\sum_{j=1}^{n_A}d(a_i,a_j)-\frac{1}{n_B^2}\sum_{i=1}^{n_B}\sum_{j=1}^{n_B}d(b_i,b_j)\bigg)$$`
---
class: body-slide

# Clustering: results

The graph visualises a separation between two of the clusters and the other four. The series which forms part of the most left-hand side cluster all have one thing in common, an increasing overall trend, or an increasing trend over the period of 2017:

&lt;img src="presentation_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;
---

class: inverse, middle, center

# Finalising the Media Sentiment Index

## A composite index approach

---
class: body-slide

# Creating the final composite index

We use the results from the clustering analysis to build a **composite index** for consumer and business confidence. 

* Using the first component of PCA as the sentiment index
* We also construct a secondary **composite index** as the top **5 indices** closest to the reference index as per the DTW metric

Principle component can be seen as using a set of possibly correlated observations, `\(\mathcal{X}\in\{x_1, \ldots, x_N\}\)`, in an orthogonal transformation to convert them into a set of values of linearly uncorrelated variables called principal components. The first component of the analysis is considered to be the constructed sentiment index

* We do this as to not bias the weighting of each of the indices in the construction of the composite index

---
class: body-slide

# Principle component results: Consumer

&lt;img src="img/pca_consumer.png" width="60%" style="display: block; margin: auto;" /&gt;

???
Talk about weighting

---
class: body-slide

# Principle component results: Consumer (Cont)

..pull-left[
  ![:scale 80%;](./img/animation.gif)
]
..pull-right[

&lt;img src="presentation_files/figure-html/unnamed-chunk-9-1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

---

class: body-slide

# Conclude

The paper explored whether it is possible to construct a media based sentiment index that could potentially act as an alternative to the traditional survey based consumer confidence index.  

  * Developed monthly index ( composite MSI) that measures economic sentiment that resembles the traditional CCI
  * Motivates for the use of large text data as an alternative source to construct economic indicators

Alonside the analaysis we construct a framework that future research can build on:

  * Time series clustering techniques can aid in evaluating a large number of indexes at once within high dimensional analysis

---

class: body-slide

# Future research

To confirm the validity of these series as economic indicators, further research needs to be conducted:

* Whether the series predicts future consumer and business activity
    - Does the MSI outperform the traditional survey based CCI
    - Do they provide informational content above and beyond the current measures of confidence
    - Extended timeframes
* Refinement in the construction of the composite index 
    - Use of topic models to control better for information that contributes to the index
      - Could structural topic modeling help us get an idea of structural stability of the index
    - Using the DTW measure alone. is there an optimal thereshold one could potentially use; i.e cumulative percentage explained we see in the PCA 

---

class: inverse, middle, center

# Questions
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
